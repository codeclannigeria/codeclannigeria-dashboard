(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[10],{"736O":function(e,t,a){e.exports={iconGroup:"iconGroup___2isdw",anticon:"anticon___1rms7",rankingList:"rankingList___QYBCV",rankingItemNumber:"rankingItemNumber___2ZbId",active:"active___V9_qM",rankingItemTitle:"rankingItemTitle___3EIv-",salesExtra:"salesExtra___2sVGC",currentDate:"currentDate___25mJq",salesCard:"salesCard___1q-4b",salesBar:"salesBar___1sFCm",salesRank:"salesRank___2P7r3",salesCardExtra:"salesCardExtra___2TaAz",salesTypeRadio:"salesTypeRadio___39Etl",offlineCard:"offlineCard___3n44L",trendText:"trendText___2DrOL",rankingTitle:"rankingTitle___26bgv",salesExtraWrap:"salesExtraWrap___2iP4Q"}},wHeE:function(e,t,a){"use strict";a.r(t);a("14J3");var n=a("BMrR"),r=(a("jCWc"),a("kPKH")),s=a("k1fw"),i=a("tJVT"),l=a("HTcj"),o=a("LvDl"),c=a.n(o),u=a("wd/R"),d=a.n(u),m=a("q1tI"),f=a.n(m),g=a("9kvl"),_=(a("T2oS"),a("W9HT")),h=function(){return f.a.createElement("div",{style:{paddingTop:100,textAlign:"center"}},f.a.createElement(_["a"],{size:"large"}))},p=a("736O"),v=a.n(p);function b(e){return 1*e<10?"0".concat(e):e}function y(e){var t=new Date,a=864e5;if("today"===e)return t.setHours(0),t.setMinutes(0),t.setSeconds(0),[d()(t),d()(t.getTime()+(a-1e3))];if("week"===e){var n=t.getDay();t.setHours(0),t.setMinutes(0),t.setSeconds(0),0===n?n=6:n-=1;var r=t.getTime()-n*a;return[d()(r),d()(r+(7*a-1e3))]}var s=t.getFullYear();if("month"===e){var i=t.getMonth(),l=d()(t).add(1,"months"),o=l.year(),c=l.month();return[d()("".concat(s,"-").concat(b(i+1),"-01 00:00:00")),d()(d()("".concat(o,"-").concat(b(c+1),"-01 00:00:00")).valueOf()-1e3)]}return[d()("".concat(s,"-01-01 00:00:00")),d()("".concat(s,"-12-31 23:59:59"))]}var k=f.a.lazy((function(){return Promise.all([a.e(0),a.e(3),a.e(5),a.e(22)]).then(a.bind(null,"X5Ne"))})),D=f.a.lazy((function(){return Promise.all([a.e(0),a.e(3),a.e(21),a.e(5),a.e(24)]).then(a.bind(null,"GBpS"))})),E=f.a.lazy((function(){return Promise.all([a.e(0),a.e(3),a.e(4),a.e(19),a.e(20)]).then(a.bind(null,"FCL4"))})),T=f.a.lazy((function(){return Promise.all([a.e(0),a.e(3),a.e(5),a.e(23)]).then(a.bind(null,"oMrT"))})),w=function(e){var t=e.dashboard,a=e.dispatch,o=e.loading,u=Object(m["useState"])({salesType:"all",dateType:"year",currentTabKey:"",rangePickerValue:y("year")}),g=Object(i["a"])(u,2),_=g[0],p=g[1],b=0;Object(m["useEffect"])((function(){return b=requestAnimationFrame((function(){a({type:"dashboard/getSubmissions",payload:{limit:1e6}}),a({type:"dashboard/getUsers",payload:{limit:1e6,opts:{sort:{createdAt:1}}}}),a({type:"dashboard/getEntities",payload:{params:{limit:1e6},responseProp:"mentorMenteesData",path:"/api/mentor-mentee"}})})),function(){a({type:"dashboard/clear"}),cancelAnimationFrame(b),clearTimeout(0)}}),[]);var w=function(e){p(Object(s["a"])(Object(s["a"])({},_),{},{rangePickerValue:e}))},x=function(e){p(Object(s["a"])(Object(s["a"])({},_),{},{rangePickerValue:y(e),dateType:e}))},O=function(e){var t=_.rangePickerValue;if(!t)return"";var a=y(e);return a&&t[0]&&t[1]&&t[0].isSame(a[0],"day")&&t[1].isSame(a[1],"day")?v.a.currentDate:""},P=function(e,t,a){for(var n=t.getTime()-e.getTime(),r=n/a,s=[],i=1;i<=a;i+=1)s.push(new Date(e.getTime()+i*r));return s},C=function(e){var t,a,n,r,s=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null===(t=_.rangePickerValue)||void 0===t||null===(a=t[0])||void 0===a?void 0:a.toDate(),i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null===(n=_.rangePickerValue)||void 0===n||null===(r=n[1])||void 0===r?void 0:r.toDate(),l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:12,o=[];if(!s||!i)return o;for(var c=P(s,i,l),u=s,m=function(t){var a=c[t],n=e.filter((function(e){var t=new Date(e.createdAt);return t>=u&&t<=a}));o.push({x:"".concat(d()(a).format("MM/DD H:S")),y:n.length}),u=d()(a).add(1,"s").toDate()},f=0;f<c.length;f+=1)m(f);return o},S=function(e){var t=c.a.groupBy(e,(function(e){var t=e.mentee;return t.id})),a=c.a.orderBy(t,(function(e){return e.length}),"desc"),n=new Date,r=d()(n),s={start:r.startOf("month").toDate(),end:r.endOf("month").toDate()},i=d()(n).subtract(1,"month"),l={start:i.startOf("month").toDate(),end:i.endOf("month").toDate()},o=[];return Object.keys(a).forEach((function(e,t){var n,r=a[e],i=t+1,c=r[0].mentee.firstName.toLocaleUpperCase(),u=r.length,d=r.filter((function(e){var t=new Date(e.createdAt);return t>=l.start&&t<=l.end})),m=r.filter((function(e){var t=new Date(e.createdAt);return t>=s.start&&t<=s.end})),f=d.length,g=m.length,_=Math.abs(f-g);n=0===f||0===g?100*_:+(100*_/f).toFixed(2);var h=d.length>m.length?1:0;o.push({index:i,keyword:c,range:n,status:h,count:u})})),o},j=function(e){var t=[],a=c.a.groupBy(e,(function(e){var t=e.track;return t.title}));return Object.keys(a).forEach((function(e){var n=a[e].length,r=e.length>=10?"".concat(e.substr(0,10),"..."):e;t.push({x:r,y:n})})),t},V=function(){var e=_.rangePickerValue,a=t.submissionsData,s=t.usersData,i=t.mentorMenteesData,c=j(i.items),u=S(a.items);return f.a.createElement(l["a"],null,f.a.createElement(m["Suspense"],{fallback:f.a.createElement(h,null)},f.a.createElement(k,{loading:o,submissionsData:a,usersData:s})),f.a.createElement(m["Suspense"],{fallback:null},f.a.createElement(D,{submissionsRawData:a,rangePickerValue:e,submissionsData:C(a.items),isActive:O,handleRangePickerChange:w,loading:o,selectDate:x})),f.a.createElement(n["a"],{gutter:24,style:{marginTop:24}},f.a.createElement(r["a"],{xl:12,lg:24,md:24,sm:24,xs:24},f.a.createElement(m["Suspense"],{fallback:null},f.a.createElement(E,{loading:o,submissionsData:a,searchData:u}))),f.a.createElement(r["a"],{xl:12,lg:24,md:24,sm:24,xs:24},f.a.createElement(m["Suspense"],{fallback:null},f.a.createElement(T,{loading:o,salesPieData:c})))))};return V()};t["default"]=Object(g["c"])((function(e){var t=e.dashboard,a=e.loading;return{dashboard:t,loading:a.effects["dashboard/getUsers"]}}))(w)}}]);